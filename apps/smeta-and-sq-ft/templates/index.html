<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construction Cost Estimator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Construction Cost Estimator</h2>
        <form method="POST">
            <div class="form-group">
                <label for="length">Length (in feet):</label>
                <input type="text" class="form-control" id="length" name="length" required>
            </div>
            <div class="form-group">
                <label for="width">Width (in feet):</label>
                <input type="text" class="form-control" id="width" name="width" required>
            </div>
            <div class="form-group">
                <label for="material_id">Select Material:</label>
                <select class="form-control" id="material_id" name="material_id" required>
                    {% for material in materials %}
                    <option value="{{ material.id }}">{{ material.name }} - ${{ material.cost_per_sqft }} per sqft</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="service_id">Select Service:</label>
                <select class="form-control" id="service_id" name="service_id" required>
                    {% for service in services %}
                    <option value="{{ service.id }}">{{ service.name }} - ${{ service.hourly_rate }} per hour</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="time_to_complete">Time to Complete (in hours):</label>
                <input type="text" class="form-control" id="time_to_complete" name="time_to_complete" required>
            </div>
            <button type="submit" class="btn btn-primary">Calculate</button>
        </form>

        {% if total_cost is not none %}
        <div class="mt-5">
            <h3>Total Costs:</h3>
            <p><strong>Material Cost:</strong> ${{ total_material_cost }}</p>
            <p><strong>Labor Cost:</strong> ${{ total_labor_cost }}</p>
            <p><strong>Total Construction Cost:</strong> ${{ total_cost }}</p>
        </div>
        {% elif error %}
        <div class="alert alert-danger mt-5">
            {{ error }}
        </div>
        {% endif %}
    </div>
</body>
</html>
